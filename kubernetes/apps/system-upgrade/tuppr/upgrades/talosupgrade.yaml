---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/tuppr.home-operations.com/talosupgrade_v1alpha1.json
apiVersion: tuppr.home-operations.com/v1alpha1
kind: TalosUpgrade
metadata:
  name: cluster
spec:
  image:
    repository: factory.talos.dev/metal-installer
    tag: v1.11.1
  upgradePolicy:
    debug: true
    # force: false
    rebootMode: powercycle
  healthChecks:
    - apiVersion: ceph.rook.io/v1
      kind: CephCluster
      expr: status.ceph.health in ['HEALTH_OK', 'HEALTH_WARN']
      # talosctl:
      #   image:
      #     repository: # Optional, default: ghcr.io/siderolabs/talosctl
      #     tag: # Optional, default: current installed Talos version
      #     pullPolicy: # Optional, default: IfNotPresent
